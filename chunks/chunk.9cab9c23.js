import{c as e}from"./chunk.4c9b946c.js";import{$ as o}from"./chunk.b3cb2d74.js";import{F as r}from"../entry.346ba6be.js";/* empty css              *//* empty css              */const c={slug:"godot-web-scraper",title:"Download images from web with Godot",description:"Scrape images and content from the web with Godot.",datetime:"2022-03-16T00:00:00.000Z",heroImage:"/posts/godot-web-scraper/banner.webp",tags:["godot","tutorial"]};function D(){return[{depth:2,slug:"overview",text:"Overview"},{depth:2,slug:"part-1-making-http-requests",text:"Part 1: Making HTTP-Requests"},{depth:3,slug:"creating-the-httprequest-node",text:"Creating the HTTPRequest node"},{depth:3,slug:"requesting-an-image",text:"Requesting an image"},{depth:2,slug:"part-2-displaying-the-image-in-godot",text:"Part 2: Displaying the image in Godot"}]}function s(l){const n=Object.assign({h2:"h2",p:"p",a:"a",h3:"h3",pre:"pre",code:"code",span:"span",img:"img"},l.components);return e(r,{children:[e(o,{videoId:"49CAuQLysyI"}),`
`,e(n.h2,{id:"overview",children:"Overview"}),`
`,e(n.p,{children:`This is a simple example of how Godot can be used as a web scraper. This tutorial is divided into two parts. Part one
focuses on how to make HTTP requests. Part two shows how the image is displayed in Godot.`}),`
`,e(n.h2,{id:"part-1-making-http-requests",children:"Part 1: Making HTTP-Requests"}),`
`,e(n.p,{children:[`Godot provides a node to make HTTP-Requests:
The `,e(n.a,{href:"https://docs.godotengine.org/en/latest/classes/class_httprequest.html",children:"HTTPRequest"}),` node. From the
description: A node with the ability to send HTTP(S) requests.`]}),`
`,e(n.p,{children:`You can either add this node to the scene tree or we can create this node with code. In this example, we create it with
code.`}),`
`,e(n.h3,{id:"creating-the-httprequest-node",children:"Creating the HTTPRequest node"}),`
`,e(n.pre,{className:"astro-code",style:{backgroundColor:"#0d1117",overflowX:"auto"},children:e(n.code,{children:[e(n.span,{className:"line",children:[e(n.span,{style:{color:"#FF7B72"},children:"func"}),e(n.span,{style:{color:"#C9D1D9"},children:" "}),e(n.span,{style:{color:"#D2A8FF"},children:"_ready"}),e(n.span,{style:{color:"#C9D1D9"},children:"() "}),e(n.span,{style:{color:"#FF7B72"},children:"->"}),e(n.span,{style:{color:"#C9D1D9"},children:" void:"})]}),`
`,e(n.span,{className:"line",children:[e(n.span,{style:{color:"#C9D1D9"},children:"    "}),e(n.span,{style:{color:"#FF7B72"},children:"var"}),e(n.span,{style:{color:"#C9D1D9"},children:" http_request "}),e(n.span,{style:{color:"#FF7B72"},children:":="}),e(n.span,{style:{color:"#C9D1D9"},children:" HTTPRequest."}),e(n.span,{style:{color:"#79C0FF"},children:"new"}),e(n.span,{style:{color:"#C9D1D9"},children:"()"})]}),`
`,e(n.span,{className:"line",children:[e(n.span,{style:{color:"#C9D1D9"},children:"    "}),e(n.span,{style:{color:"#79C0FF"},children:"add_child"}),e(n.span,{style:{color:"#C9D1D9"},children:"(http_request)"})]}),`
`,e(n.span,{className:"line"}),`
`,e(n.span,{className:"line",children:[e(n.span,{style:{color:"#C9D1D9"},children:"    # Connect "}),e(n.span,{style:{color:"#A5D6FF"},children:'"request_completed"'}),e(n.span,{style:{color:"#C9D1D9"},children:" signal of HTTPRequest node."})]}),`
`,e(n.span,{className:"line",children:[e(n.span,{style:{color:"#C9D1D9"},children:"    http_request."}),e(n.span,{style:{color:"#79C0FF"},children:"connect"}),e(n.span,{style:{color:"#C9D1D9"},children:"("}),e(n.span,{style:{color:"#A5D6FF"},children:'"request_completed"'}),e(n.span,{style:{color:"#C9D1D9"},children:", _on_http_request_request_completed)"})]}),`
`,e(n.span,{className:"line"}),`
`,e(n.span,{className:"line",children:[e(n.span,{style:{color:"#FF7B72"},children:"func"}),e(n.span,{style:{color:"#C9D1D9"},children:" "}),e(n.span,{style:{color:"#D2A8FF"},children:"_on_http_request_request_completed"}),e(n.span,{style:{color:"#C9D1D9"},children:"(result: "}),e(n.span,{style:{color:"#FF7B72"},children:"int"}),e(n.span,{style:{color:"#C9D1D9"},children:", response_code: "}),e(n.span,{style:{color:"#FF7B72"},children:"int"}),e(n.span,{style:{color:"#C9D1D9"},children:", headers: PackedStringArray, body:"})]}),`
`,e(n.span,{className:"line",children:[e(n.span,{style:{color:"#C9D1D9"},children:"PackedByteArray) "}),e(n.span,{style:{color:"#FF7B72"},children:"->"}),e(n.span,{style:{color:"#C9D1D9"},children:" void:"})]}),`
`,e(n.span,{className:"line",children:e(n.span,{style:{color:"#C9D1D9"},children:"    pass"})})]})}),`
`,e(n.h3,{id:"requesting-an-image",children:"Requesting an image"}),`
`,e(n.p,{children:"Now all we have to do is request an image from a website."}),`
`,e(n.pre,{className:"astro-code",style:{backgroundColor:"#0d1117",overflowX:"auto"},children:e(n.code,{children:[e(n.span,{className:"line",children:[e(n.span,{style:{color:"#FF7B72"},children:"var"}),e(n.span,{style:{color:"#C9D1D9"},children:" error "}),e(n.span,{style:{color:"#FF7B72"},children:"="}),e(n.span,{style:{color:"#C9D1D9"},children:" http_request."}),e(n.span,{style:{color:"#79C0FF"},children:"request"}),e(n.span,{style:{color:"#C9D1D9"},children:"("}),e(n.span,{style:{color:"#A5D6FF"},children:'"https://api.lorem.space/image/house"'}),e(n.span,{style:{color:"#C9D1D9"},children:")"})]}),`
`,e(n.span,{className:"line",children:[e(n.span,{style:{color:"#FF7B72"},children:"if"}),e(n.span,{style:{color:"#C9D1D9"},children:" "}),e(n.span,{style:{color:"#FF7B72"},children:"error"}),e(n.span,{style:{color:"#C9D1D9"},children:" "}),e(n.span,{style:{color:"#FF7B72"},children:"!="}),e(n.span,{style:{color:"#C9D1D9"},children:" OK:"})]}),`
`,e(n.span,{className:"line",children:[e(n.span,{style:{color:"#C9D1D9"},children:"    "}),e(n.span,{style:{color:"#79C0FF"},children:"printerr"}),e(n.span,{style:{color:"#C9D1D9"},children:"("}),e(n.span,{style:{color:"#A5D6FF"},children:'"An error occurred."'}),e(n.span,{style:{color:"#C9D1D9"},children:")"})]})]})}),`
`,e(n.p,{children:"If the request is unsuccessful, the error message is displayed."}),`
`,e(n.h2,{id:"part-2-displaying-the-image-in-godot",children:"Part 2: Displaying the image in Godot"}),`
`,e(n.p,{children:["Add the following code to the ",e(n.code,{children:"_on_http_request_request_completed"})," function:"]}),`
`,e(n.pre,{className:"astro-code",style:{backgroundColor:"#0d1117",overflowX:"auto"},children:e(n.code,{children:[e(n.span,{className:"line",children:[e(n.span,{style:{color:"#FF7B72"},children:"if"}),e(n.span,{style:{color:"#C9D1D9"},children:" result "}),e(n.span,{style:{color:"#FF7B72"},children:"!="}),e(n.span,{style:{color:"#C9D1D9"},children:" HTTPRequest.RESULT_SUCCESS:"})]}),`
`,e(n.span,{className:"line",children:[e(n.span,{style:{color:"#C9D1D9"},children:"    "}),e(n.span,{style:{color:"#79C0FF"},children:"push_error"}),e(n.span,{style:{color:"#C9D1D9"},children:"("}),e(n.span,{style:{color:"#A5D6FF"},children:'"Image could not be downloaded."'}),e(n.span,{style:{color:"#C9D1D9"},children:")"})]}),`
`,e(n.span,{className:"line"}),`
`,e(n.span,{className:"line",children:[e(n.span,{style:{color:"#FF7B72"},children:"var"}),e(n.span,{style:{color:"#C9D1D9"},children:" img "}),e(n.span,{style:{color:"#FF7B72"},children:":="}),e(n.span,{style:{color:"#C9D1D9"},children:" Image."}),e(n.span,{style:{color:"#79C0FF"},children:"new"}),e(n.span,{style:{color:"#C9D1D9"},children:"()"})]}),`
`,e(n.span,{className:"line",children:[e(n.span,{style:{color:"#FF7B72"},children:"var"}),e(n.span,{style:{color:"#C9D1D9"},children:" error "}),e(n.span,{style:{color:"#FF7B72"},children:"="}),e(n.span,{style:{color:"#C9D1D9"},children:" img."}),e(n.span,{style:{color:"#79C0FF"},children:"load_jpg_from_buffer"}),e(n.span,{style:{color:"#C9D1D9"},children:"(body)"})]}),`
`,e(n.span,{className:"line",children:[e(n.span,{style:{color:"#FF7B72"},children:"if"}),e(n.span,{style:{color:"#C9D1D9"},children:" "}),e(n.span,{style:{color:"#FF7B72"},children:"error"}),e(n.span,{style:{color:"#C9D1D9"},children:" "}),e(n.span,{style:{color:"#FF7B72"},children:"!="}),e(n.span,{style:{color:"#C9D1D9"},children:" OK:"})]}),`
`,e(n.span,{className:"line",children:[e(n.span,{style:{color:"#C9D1D9"},children:"    "}),e(n.span,{style:{color:"#79C0FF"},children:"push_error"}),e(n.span,{style:{color:"#C9D1D9"},children:"("}),e(n.span,{style:{color:"#A5D6FF"},children:'"Could not load the image."'}),e(n.span,{style:{color:"#C9D1D9"},children:")"})]}),`
`,e(n.span,{className:"line"}),`
`,e(n.span,{className:"line",children:[e(n.span,{style:{color:"#FF7B72"},children:"var"}),e(n.span,{style:{color:"#C9D1D9"},children:" tex "}),e(n.span,{style:{color:"#FF7B72"},children:"="}),e(n.span,{style:{color:"#C9D1D9"},children:" ImageTexture."}),e(n.span,{style:{color:"#79C0FF"},children:"new"}),e(n.span,{style:{color:"#C9D1D9"},children:"()"})]}),`
`,e(n.span,{className:"line",children:[e(n.span,{style:{color:"#C9D1D9"},children:"tex."}),e(n.span,{style:{color:"#79C0FF"},children:"create_from_image"}),e(n.span,{style:{color:"#C9D1D9"},children:"(img)"})]}),`
`,e(n.span,{className:"line"}),`
`,e(n.span,{className:"line",children:[e(n.span,{style:{color:"#FF7B72"},children:"var"}),e(n.span,{style:{color:"#C9D1D9"},children:" sprite "}),e(n.span,{style:{color:"#FF7B72"},children:":="}),e(n.span,{style:{color:"#C9D1D9"},children:" Sprite3D."}),e(n.span,{style:{color:"#79C0FF"},children:"new"}),e(n.span,{style:{color:"#C9D1D9"},children:"()"})]}),`
`,e(n.span,{className:"line",children:[e(n.span,{style:{color:"#79C0FF"},children:"add_child"}),e(n.span,{style:{color:"#C9D1D9"},children:"(sprite)"})]}),`
`,e(n.span,{className:"line"}),`
`,e(n.span,{className:"line",children:[e(n.span,{style:{color:"#C9D1D9"},children:"sprite.texture "}),e(n.span,{style:{color:"#FF7B72"},children:"="}),e(n.span,{style:{color:"#C9D1D9"},children:" tex"})]}),`
`,e(n.span,{className:"line",children:[e(n.span,{style:{color:"#C9D1D9"},children:"sprite.position "}),e(n.span,{style:{color:"#FF7B72"},children:"="}),e(n.span,{style:{color:"#C9D1D9"},children:" "}),e(n.span,{style:{color:"#79C0FF"},children:"Vector3"}),e(n.span,{style:{color:"#C9D1D9"},children:"("}),e(n.span,{style:{color:"#79C0FF"},children:"0"}),e(n.span,{style:{color:"#C9D1D9"},children:", "}),e(n.span,{style:{color:"#79C0FF"},children:"0"}),e(n.span,{style:{color:"#C9D1D9"},children:", "}),e(n.span,{style:{color:"#FF7B72"},children:"-"}),e(n.span,{style:{color:"#79C0FF"},children:"5"}),e(n.span,{style:{color:"#C9D1D9"},children:")"})]})]})}),`
`,e(n.p,{children:["The image is then loaded with the data response of the request (",e(n.code,{children:"body"}),`). Depending on the image type requested, you may
want to change `,e(n.code,{children:"load_jpg_from_buffer"})," to other image formats. You can change the ",e(n.code,{children:"jpg"}),`
in `,e(n.a,{href:"https://docs.godotengine.org/en/latest/classes/class_image.html?highlight=image#class-image-method-load-jpg-from-buffer",children:e(n.code,{children:"load_jpg_from_buffer"})}),`
to `,e(n.code,{children:"bmp"}),", ",e(n.code,{children:"png"}),", ",e(n.code,{children:"tga"})," or ",e(n.code,{children:"webp"}),"."]}),`
`,e(n.p,{children:"If the request is successful, the sprite with the requested image should appear in your scene:"}),`
`,e(n.p,{children:e(n.img,{src:"/posts/godot-web-scraper/banner.webp",alt:"Image 1"})}),`
`,e(n.p,{children:"Godot v4.0.alpha4.official"})]})}function t(l={}){const{wrapper:n}=l.components||{};return n?e(n,{...l,children:e(s,{...l})}):s(l)}const m="src/content/posts/godot-web-scraper.mdx",F="/home/runner/work/website/website/src/content/posts/godot-web-scraper.mdx",a=(l={})=>t({...l,components:{Fragment:r,...l.components}});a[Symbol.for("astro.needsHeadRendering")]=!Boolean(c.layout);export{a as Content,a as default,F as file,c as frontmatter,D as getHeadings,m as url};
