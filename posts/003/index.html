<!doctype html><html lang=en><head><title>Image downloading from web with Godot</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Overview This is a simple example of how Godot can be used as a web scraper. This tutorial is divided into two parts. Part one focuses on how to make HTTP requests. Part two shows how the image is displayed in Godot.
Part 1: Making HTTP-Requests Godot has a node called HTTPRequest. From the description: A node with the ability to send HTTP(S) requests.
You can either add this node to the scene tree or we can create this node with code."><meta name=keywords content="godot,tutorial"><meta name=robots content="noodp"><link rel=canonical href=https://arcaneenergy.github.io/posts/003/><link rel=stylesheet type=text/css href=https://arcaneenergy.github.io/sass/style.min.6caf09c003a810a3670759ebc8e88d2c4a87a34be1211fa20d60121180253c98.css><link rel="shortcut icon" href=https://arcaneenergy.github.io/favicon.svg><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="Image downloading from web with Godot"><meta property="og:description" content="Overview This is a simple example of how Godot can be used as a web scraper. This tutorial is divided into two parts. Part one focuses on how to make HTTP requests. Part two shows how the image is displayed in Godot.
Part 1: Making HTTP-Requests Godot has a node called HTTPRequest. From the description: A node with the ability to send HTTP(S) requests.
You can either add this node to the scene tree or we can create this node with code."><meta property="og:url" content="https://arcaneenergy.github.io/posts/003/"><meta property="og:site_name" content="Arcane Energy"><meta property="og:image" content="https://arcaneenergy.github.io/posts/003_result.png"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:published_time" content="2022-03-16 12:45:22 +0100 +0100"></head><body><div class="container center headings--one-size"><header class=header></header><div class=content><div class=post><h1 class=post-title><a href=https://arcaneenergy.github.io/posts/003/>Image downloading from web with Godot</a></h1><div class=post-meta><span class=post-date>2022-03-16</span></div><span class=post-tags>#<a href=https://arcaneenergy.github.io/tags/godot/>godot</a>&nbsp;
#<a href=https://arcaneenergy.github.io/tags/tutorial/>tutorial</a>&nbsp;</span>
<img src=https://arcaneenergy.github.io/posts/003_result.png class="post-cover expandable" alt="Image downloading from web with Godot" title="Cover Image"><div class=table-of-contents><h2>Table of Contents</h2><nav id=TableOfContents><ul><li><a href=#overview>Overview</a></li><li><a href=#part-1-making-http-requests>Part 1: Making HTTP-Requests</a><ul><li><a href=#creating-the-httprequest-node>Creating the HTTPRequest node</a></li><li><a href=#requesting-an-image>Requesting an image</a></li></ul></li><li><a href=#part-2-displaying-the-image-in-godot>Part 2: Displaying the image in Godot</a></li></ul></nav></div><div class=post-content><div><div class="embed video-player"><iframe width=100% height=405 src=https://www.youtube.com/embed/49CAuQLysyI title="YouTube video player" frameborder=0 allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div><h2 id=overview>Overview<a href=#overview class=hanchor arialabel=Anchor>&#8983;</a></h2><p>This is a simple example of how Godot can be used as a web scraper. This tutorial is divided into two parts. Part one focuses on how to make HTTP requests. Part two shows how the image is displayed in Godot.</p><h2 id=part-1-making-http-requests>Part 1: Making HTTP-Requests<a href=#part-1-making-http-requests class=hanchor arialabel=Anchor>&#8983;</a></h2><p>Godot has a node called <a href=https://docs.godotengine.org/en/latest/classes/class_httprequest.html><code>HTTPRequest</code></a>. From the description: <code>A node with the ability to send HTTP(S) requests.</code></p><p>You can either add this node to the scene tree or we can create this node with code. In this example, we create it with code.</p><h3 id=creating-the-httprequest-node>Creating the HTTPRequest node<a href=#creating-the-httprequest-node class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=collapsable-code><input id=465198273 type=checkbox>
<label for=465198273><span class=collapsable-code__language>gdscript</span>
<span class=collapsable-code__toggle data-label-expand=▲ data-label-collapse=▼></span></label><pre class=language-python><code>
func _ready() -&gt; void:
	var http_request := HTTPRequest.new()
	add_child(http_request)

	# Connect &#34;request_completed&#34; signal of HTTPRequest node.
	http_request.connect(&#34;request_completed&#34;, _on_http_request_request_completed)

func _on_http_request_request_completed(result: int, response_code: int, headers: PackedStringArray, body: PackedByteArray) -&gt; void:
	pass
</code></pre></div><h3 id=requesting-an-image>Requesting an image<a href=#requesting-an-image class=hanchor arialabel=Anchor>&#8983;</a></h3><p>Now all we have to do is request an image from a website.</p><div class=collapsable-code><input id=635829417 type=checkbox>
<label for=635829417><span class=collapsable-code__language>gdscript</span>
<span class=collapsable-code__toggle data-label-expand=▲ data-label-collapse=▼></span></label><pre class=language-python><code>
var error = http_request.request(&#34;https://api.lorem.space/image/house&#34;)
if error != OK:
    printerr(&#34;An error occurred.&#34;)
</code></pre></div><p>If the request is unsuccessful, the error message is displayed.</p><h2 id=part-2-displaying-the-image-in-godot>Part 2: Displaying the image in Godot<a href=#part-2-displaying-the-image-in-godot class=hanchor arialabel=Anchor>&#8983;</a></h2><p>Add the following code to the <code>_on_http_request_request_completed</code> function:</p><div class=collapsable-code><input id=596832174 type=checkbox>
<label for=596832174><span class=collapsable-code__language>gdscript</span>
<span class=collapsable-code__toggle data-label-expand=▲ data-label-collapse=▼></span></label><pre class=language-python><code>
if result != HTTPRequest.RESULT_SUCCESS:
    push_error(&#34;Image could not be downloaded.&#34;)

var img := Image.new()
var error = img.load_jpg_from_buffer(body)
if error != OK:
    push_error(&#34;Could not load the image.&#34;)

var tex = ImageTexture.new()
tex.create_from_image(img)

var sprite := Sprite3D.new()
add_child(sprite)

sprite.texture = tex
sprite.position = Vector3(0, 0, -5)
</code></pre></div><p>The image is then loaded with the data response of the request (<code>body</code>). Depending on the image type requested, you may want to change <code>load_jpg_from_buffer</code> to other image formats. You can change the <code>jpg</code> in <a href="https://docs.godotengine.org/en/latest/classes/class_image.html?highlight=image#class-image-method-load-jpg-from-buffer"><code>load_jpg_from_buffer</code></a> to <code>bmp</code>, <code>png</code>, <code>tga</code> or <code>webp</code>.</p><p>If the request is successful, the sprite with the requested image should appear in your scene:</p><img src=/posts/003_result.png class="left expandable"><p>Godot v4.0.alpha4.official</p></div></div></div></div><footer class=footer><hr><div class=footer__inner><div class=col-xs-4><h3>Arcane Energy</h3><a href=https://arcaneenergy.github.io/>Homepage</a>
<a href=https://arcaneenergy.github.io/apps>Apps</a>
<a href=https://arcaneenergy.github.io/posts>Posts</a>
<a href=https://arcaneenergy.github.io/assets>Assets</a>
<a href=https://arcaneenergy.github.io/whiteboard>Whiteboard</a></div><div class=col-xs-4><h3>Follow</h3><a href=https://www.youtube.com/c/ArcaneEnergy>YouTube</a>
<a href=https://twitter.com/arcanenergy>Twitter</a>
<a href=https://www.reddit.com/r/arcaneenergy/>Reddit</a>
<a href="https://play.google.com/store/apps/dev?id=5802860236940422854">Google Play Store</a>
<a href=https://arcaneenergy.itch.io/>itch.io</a></div><div class=col-xs-4><h3>About</h3><a href=# id=email-btn>Contact</a></div></div><script type=text/javascript src=https://storage.ko-fi.com/cdn/widget/Widget_2.js></script><script type=text/javascript>kofiwidget2.init("Support Me on Ko-fi","#29abe0","E1E5CVWWE"),kofiwidget2.draw()</script><hr><div class=footer__outer><span>© 2022 Arcane Energy</span>
<a href=https://arcaneenergy.github.io/privacy class=footer-privacy>Privacy</a></div></footer><div class=img-enlarger-modal id=img-enlarger-modal><img id=img-enlarger-img></div><script type=text/javascript src=/js/prism.js defer></script>
<script type=text/javascript src=/js/embla/embla-carousel.umd.js defer></script>
<script type=text/javascript src=/js/embla/embla-carousel-autoplay.umd.js defer></script>
<script type=text/javascript src=/js/img-enlarger.js defer></script>
<script type=text/javascript>document.querySelector("#email-btn").addEventListener("click",()=>window.open("mailto:arcane.energy.help@gmail.com"))</script></div></body></html>